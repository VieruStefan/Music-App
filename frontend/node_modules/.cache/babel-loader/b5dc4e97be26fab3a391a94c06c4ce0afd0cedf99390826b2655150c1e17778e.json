{"ast":null,"code":"import axios from \"axios\";\nconst RECORD_API_BASE_URL = \"http://localhost:7000/api/songcollection/songs\";\nconst parseJwt = token => {\n  try {\n    return JSON.parse(atob(token.split('.')[1]));\n  } catch (e) {\n    return null;\n  }\n};\nconst checkExp = () => {\n  console.log(\"checking...\");\n  var token = localStorage.getItem(\"token\");\n  var decodedJwt = parseJwt(token);\n  if (decodedJwt.exp * 1000 < Date.now()) {\n    localStorage.clear();\n    alert(\"Logged out!\");\n  }\n};\nclass RecordServiceClass {\n  saveRecord(record) {\n    checkExp();\n    var token = localStorage.getItem(\"token\");\n    return axios.put(RECORD_API_BASE_URL, {\n      name: record.name,\n      genre: record.genre,\n      year: record.year,\n      type: record.type\n    }, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n  }\n  getRecords() {\n    checkExp();\n    return axios.get(RECORD_API_BASE_URL);\n  }\n  getRecordById(id) {\n    checkExp();\n    return axios.get(RECORD_API_BASE_URL + \"/\" + id);\n  }\n  updateRecord(record, id) {\n    checkExp();\n    var token = localStorage.getItem(\"token\");\n    return axios.put(RECORD_API_BASE_URL + \"/\" + id, record, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n  }\n  deleteRecord(id) {\n    checkExp();\n    var token = localStorage.getItem(\"token\");\n    return axios.delete(RECORD_API_BASE_URL + \"/\" + id, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n  }\n}\nconst RecordService = new RecordServiceClass();\nexport default RecordService;","map":{"version":3,"names":["axios","RECORD_API_BASE_URL","parseJwt","token","JSON","parse","atob","split","e","checkExp","console","log","localStorage","getItem","decodedJwt","exp","Date","now","clear","alert","RecordServiceClass","saveRecord","record","put","name","genre","year","type","headers","getRecords","get","getRecordById","id","updateRecord","deleteRecord","delete","RecordService"],"sources":["/home/stefan/Documents/POS/frontend/src/services/RecordService.js"],"sourcesContent":["import axios from \"axios\";\n\nconst RECORD_API_BASE_URL = \"http://localhost:7000/api/songcollection/songs\";\n\nconst parseJwt = (token) => {\n    try {\n      return JSON.parse(atob(token.split('.')[1]));\n    } catch (e) {\n      return null;\n    }\n};\nconst checkExp = () =>{\n    console.log(\"checking...\");\n    var token = localStorage.getItem(\"token\");\n    var decodedJwt = parseJwt(token);\n    if(decodedJwt.exp * 1000 < Date.now())\n    {\n        localStorage.clear();\n        alert(\"Logged out!\");\n    }\n}\nclass RecordServiceClass{\n    \n    saveRecord(record){\n        checkExp();\n        var token = localStorage.getItem(\"token\");\n        return axios.put(RECORD_API_BASE_URL , {\n            name: record.name,\n            genre: record.genre,\n            year: record.year,\n            type: record.type\n        }, {headers: {\"Authorization\" : `Bearer ${token}`}})\n    }\n\n    getRecords(){\n        checkExp();\n        return axios.get(RECORD_API_BASE_URL);\n    }\n\n    getRecordById(id){\n        checkExp();\n        return axios.get(RECORD_API_BASE_URL + \"/\" + id);\n    }\n\n    updateRecord(record, id){\n        checkExp();\n        var token = localStorage.getItem(\"token\");\n        return axios.put(RECORD_API_BASE_URL + \"/\" + id, record, {headers: {\"Authorization\" : `Bearer ${token}`}});\n    }\n\n    deleteRecord(id){\n        checkExp();\n        var token = localStorage.getItem(\"token\");\n        return axios.delete(RECORD_API_BASE_URL + \"/\" + id, {headers: {\"Authorization\" : `Bearer ${token}`}});\n    }\n}\nconst RecordService = new RecordServiceClass()\nexport default RecordService;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,mBAAmB,GAAG,gDAAgD;AAE5E,MAAMC,QAAQ,GAAIC,KAAK,IAAK;EACxB,IAAI;IACF,OAAOC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACH,KAAK,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC9C,CAAC,CAAC,OAAOC,CAAC,EAAE;IACV,OAAO,IAAI;EACb;AACJ,CAAC;AACD,MAAMC,QAAQ,GAAG,MAAK;EAClBC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;EAC1B,IAAIR,KAAK,GAAGS,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACzC,IAAIC,UAAU,GAAGZ,QAAQ,CAACC,KAAK,CAAC;EAChC,IAAGW,UAAU,CAACC,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,EAAE,EACrC;IACIL,YAAY,CAACM,KAAK,EAAE;IACpBC,KAAK,CAAC,aAAa,CAAC;EACxB;AACJ,CAAC;AACD,MAAMC,kBAAkB;EAEpBC,UAAU,CAACC,MAAM,EAAC;IACdb,QAAQ,EAAE;IACV,IAAIN,KAAK,GAAGS,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACzC,OAAOb,KAAK,CAACuB,GAAG,CAACtB,mBAAmB,EAAG;MACnCuB,IAAI,EAAEF,MAAM,CAACE,IAAI;MACjBC,KAAK,EAAEH,MAAM,CAACG,KAAK;MACnBC,IAAI,EAAEJ,MAAM,CAACI,IAAI;MACjBC,IAAI,EAAEL,MAAM,CAACK;IACjB,CAAC,EAAE;MAACC,OAAO,EAAE;QAAC,eAAe,EAAI,UAASzB,KAAM;MAAC;IAAC,CAAC,CAAC;EACxD;EAEA0B,UAAU,GAAE;IACRpB,QAAQ,EAAE;IACV,OAAOT,KAAK,CAAC8B,GAAG,CAAC7B,mBAAmB,CAAC;EACzC;EAEA8B,aAAa,CAACC,EAAE,EAAC;IACbvB,QAAQ,EAAE;IACV,OAAOT,KAAK,CAAC8B,GAAG,CAAC7B,mBAAmB,GAAG,GAAG,GAAG+B,EAAE,CAAC;EACpD;EAEAC,YAAY,CAACX,MAAM,EAAEU,EAAE,EAAC;IACpBvB,QAAQ,EAAE;IACV,IAAIN,KAAK,GAAGS,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACzC,OAAOb,KAAK,CAACuB,GAAG,CAACtB,mBAAmB,GAAG,GAAG,GAAG+B,EAAE,EAAEV,MAAM,EAAE;MAACM,OAAO,EAAE;QAAC,eAAe,EAAI,UAASzB,KAAM;MAAC;IAAC,CAAC,CAAC;EAC9G;EAEA+B,YAAY,CAACF,EAAE,EAAC;IACZvB,QAAQ,EAAE;IACV,IAAIN,KAAK,GAAGS,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACzC,OAAOb,KAAK,CAACmC,MAAM,CAAClC,mBAAmB,GAAG,GAAG,GAAG+B,EAAE,EAAE;MAACJ,OAAO,EAAE;QAAC,eAAe,EAAI,UAASzB,KAAM;MAAC;IAAC,CAAC,CAAC;EACzG;AACJ;AACA,MAAMiC,aAAa,GAAG,IAAIhB,kBAAkB,EAAE;AAC9C,eAAegB,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}